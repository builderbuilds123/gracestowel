# Sprint Status Tracking
# Generated by Sprint Planning Workflow
# Date: 2025-12-08T21:30:00-08:00

generated: "2025-12-08T21:30:00-08:00"
project: gracestowel
project_key: GRACE
tracking_system: file-system
story_location: docs/sprint/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists in epic file but not contexted
#   - contexted: Epic tech context created (required before drafting stories)
#   - in-progress: Active development
#   - done: Epic completed
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved and story context created
#   - in-progress: Developer actively working on implementation
#   - review: Under SM review
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done

development_status:
  # --- Core Epics (from docs/product/epics/overview.md) ---
  epic-0: backlog
  0-1-establish-medusa-client-hyperdrive-connection: done
  0-2-refactor-pdp-to-dynamic-data: done
  epic-0-retrospective: optional

  epic-1: in-progress
  1-1-initialize-posthog-sdk-client-side: done
  1-2-track-key-user-events:
    path: docs/sprint/sprint-artifacts/1-2-track-key-user-events.md
    status: done
  1-3-associate-events-anonymous-id: done
  epic-1-retrospective: optional

  epic-2: backlog
  2-1-implement-server-side-tracking: backlog
  2-2-identify-associate-logged-in-users: backlog
  2-3-ensure-correct-user-id-server-side: backlog
  epic-2-retrospective: optional

  epic-3: backlog
  3-1-create-posthog-dashboards: backlog
  3-2-enable-advanced-filtering: backlog
  3-3-provide-access-dashboards-admin: backlog
  epic-3-retrospective: optional

  epic-4: backlog
  4-1-implement-error-tracking-posthog: backlog
  4-2-track-web-vitals-performance: backlog
  4-3-implement-backend-event-tracking: backlog
  4-4-create-posthog-monitoring-dashboards: backlog
  4-5-set-up-basic-alerting: backlog
  epic-4-retrospective: optional

  # --- Cookie Policy Epics (from docs/product/epics/cookie-policy.md) ---
  cp-epic-1: backlog
  cp-1-1-create-cookie-policy-popup: backlog
  cp-1-2-implement-popup-display: backlog
  cp-1-3-implement-popup-dismissal: backlog
  cp-epic-1-retrospective: optional

  # --- Price Transparency Epics (from docs/product/epics/price-transparency.md) ---
  pt-epic-1: backlog
  pt-1-1-data-modeling-product-costs: backlog
  pt-1-2-admin-ui-cost-configuration: backlog
  pt-epic-1-retrospective: optional

  pt-epic-2: backlog
  pt-2-1-infrastructure-cost-fetcher: backlog
  pt-2-2-ad-spend-aggregator: backlog
  pt-2-3-payment-saas-fee-calculator: backlog
  pt-epic-2-retrospective: optional

  pt-epic-3: backlog
  pt-3-1-dynamic-price-calculation-logic: backlog
  pt-3-2-session-based-price-locking: backlog
  pt-epic-3-retrospective: optional

  pt-epic-4: backlog
  pt-4-1-pdp-price-breakdown-component: backlog
  pt-4-2-cost-context-tooltips: backlog
  pt-4-3-social-impact-visualization: backlog
  pt-epic-4-retrospective: optional

  pt-epic-5: backlog
  pt-5-1-charity-api-integration: backlog
  pt-5-2-post-purchase-async-donation: backlog
  pt-5-3-impact-certificate-email: backlog
  pt-epic-5-retrospective: optional

  pt-epic-6: backlog
  pt-6-1-price-monitoring-job: backlog
  pt-6-2-automated-credit-issuance: backlog
  pt-6-3-good-news-notification: backlog
  pt-epic-6-retrospective: optional

  # --- Payment Integration Epics (from docs/product/epics/payment-integration.md) ---
  pi-epic-1: in-progress
  1-1-validate-backend-webhooks:
    path: docs/sprint/sprint-artifacts/1-1-validate-backend-webhooks.md
    status: done
  1-2-validate-storefront-checkout:
    path: docs/sprint/sprint-artifacts/1-2-validate-storefront-checkout.md
    status: done
  1-3-implement-express-checkout-handler:
    path: docs/sprint/sprint-artifacts/1-3-implement-express-checkout-handler.md
    status: done
  1-4-validate-auth-only-logic:
    path: docs/sprint/sprint-artifacts/1-4-validate-auth-only-logic.md
    status: done
  pi-epic-1-retrospective: optional

  pi-epic-2: in-progress
  2-1-implement-redis-token-infra:
    path: docs/sprint/sprint-artifacts/2-1-implement-redis-token-infra.md
    status: done
  2-2-expiration-listener:
    path: docs/sprint/sprint-artifacts/2-2-expiration-listener.md
    status: done
  2-3-capture-workflow:
    path: docs/sprint/sprint-artifacts/2-3-capture-workflow.md
    status: done
  2-4-fallback-cron:
    path: docs/sprint/sprint-artifacts/2-4-fallback-cron.md
    status: done
  pi-epic-2-retrospective: optional

  pi-epic-3: backlog
  3-1-storefront-timer-edit-ui:
    path: docs/sprint/sprint-artifacts/3-1-storefront-timer-edit-ui.md
    status: done
  3-2-increment-authorization-logic:
    path: docs/sprint/sprint-artifacts/3-2-increment-authorization-logic.md
    status: done
    meta: "Contains merged scope from 3-3. 5 review rounds completed."
  3-4-order-cancellation-during-grace-period:
    path: docs/sprint/sprint-artifacts/3-4-order-cancellation-during-grace-period.md
    status: done
  pi-epic-3-retrospective: optional

  pi-epic-4: backlog
  4-1-magic-link-generation:
    path: docs/sprint/sprint-artifacts/4-1-magic-link-generation.md
    status: done
  4-2-guest-auth-middleware:
    path: docs/sprint/sprint-artifacts/4-2-guest-auth-middleware.md
    status: done
  4-3-session-persistence:
    path: docs/sprint/sprint-artifacts/4-3-session-persistence.md
    status: done
  pi-epic-4-retrospective: optional

  pi-epic-5: in-progress
  5-1-e2e-grace-period-tests:
    path: docs/sprint/sprint-artifacts/5-1-e2e-grace-period-tests.md
    status: done
  5-2-e2e-test-infrastructure:
    status: backlog
    meta: "Enable E2E tests in CI - remove test.skip(), add order seeding, overhaul existing tests for recent changes"
  pi-epic-5-retrospective: optional

  pi-epic-6: in-progress
  6-1-webhook-validation-retry:
    path: docs/sprint/sprint-artifacts/6-1-webhook-validation-retry.md
    status: done
  6-2-redis-connection-failure-handling:
    path: docs/sprint/sprint-artifacts/6-2-redis-connection-failure-handling.md
    status: done
  6-3-race-condition-handling:
    path: docs/sprint/sprint-artifacts/6-3-race-condition-handling.md
    status: done
  6-4-increment-fallback-flow:
    path: docs/sprint/sprint-artifacts/6-4-increment-fallback-flow.md
    status: done
  pi-epic-6-retrospective: optional

  pi-epic-7: backlog
  7-1-secure-token-generation: backlog
  7-2-rate-limiting: backlog
  7-3-audit-logging: backlog
  7-4-csrf-protection: backlog
  pi-epic-7-retrospective: optional

  pi-epic-8: in-progress
  8-1-structured-logging:
    status: done
    path: docs/sprint/sprint-artifacts/checkout-payment-flow-fixes.md
    meta: "Implemented as part of checkout-payment-flow-fixes story. PR #55 merged 2025-12-13."
  8-2-metrics-dashboard: backlog
  8-3-alerting: backlog
  pi-epic-8-retrospective: optional

  # Backlog: Atomic batch item addition
  batch-add-items-endpoint:
    status: backlog
    meta: "Create POST /store/orders/:id/line-items/batch for atomic multi-item add. Single Stripe increment call for total, all-or-nothing commit. Required for true AC6 compliance with multi-item UX."

  # --- Course Correction: Checkout Payment Flow Fixes (2025-12-12) ---
  checkout-payment-flow-fixes:
    status: done
    proposal: docs/sprint/proposals/sprint-change-proposal-2025-12-12-checkout-fixes.md
    story: docs/sprint/sprint-artifacts/checkout-payment-flow-fixes.md
    meta: "PR #55 merged 2025-12-13. PaymentIntent lifecycle, idempotency, structured logging."
    completed: "2025-12-13"
    changes:
      - id: change-1-payment-intent-lifecycle
        status: done
        files: ["apps/storefront/app/routes/api.payment-intent.ts", "apps/storefront/app/routes/checkout.tsx"]
        description: "Create once, update on changes pattern with server-side idempotency"
      - id: change-2-structured-logging
        status: done
        files: ["apps/storefront/app/lib/logger.ts"]
        description: "New logger utility with trace ID generation and propagation"
      - id: change-3-backend-idempotency
        status: done
        files: ["apps/backend/src/loaders/stripe-event-worker.ts"]
        description: "Idempotent order creation in webhook handler"

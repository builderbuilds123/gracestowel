# =============================================================================
# Backend (Medusa) Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
#
# For full environment setup guide, see: docs/ENVIRONMENTS.md
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Environment (for local docker-compose)
# -----------------------------------------------------------------------------
POSTGRES_USER=medusa
POSTGRES_PASSWORD=medusa

# -----------------------------------------------------------------------------
# Database & Cache
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Local: postgresql://medusa:medusa@localhost:5432/medusa
# Railway: Provided automatically by Railway
DATABASE_URL=postgresql://medusa:medusa@localhost:5432/medusa

# Redis connection string
# Local: redis://localhost:6379
# Railway: Provided automatically by Railway
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Security (REQUIRED - Generate unique values for each environment)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
JWT_SECRET=dev-secret-change-in-production
COOKIE_SECRET=dev-secret-change-in-production

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins for Store API (comma-separated)
# Local: http://localhost:5173,https://localhost:5173
# Staging: https://gracestowelstorefront-staging.your-domain.workers.dev
# Production: https://gracestowelstorefront.your-domain.workers.dev
STORE_CORS=http://localhost:5173,https://localhost:5173

# Allowed origins for Admin API
ADMIN_CORS=http://localhost:7002

# Allowed origins for Auth API
AUTH_CORS=http://localhost:5173,https://localhost:5173

# -----------------------------------------------------------------------------
# Medusa Configuration
# -----------------------------------------------------------------------------
MEDUSA_BACKEND_URL=http://localhost:9000

# -----------------------------------------------------------------------------
# Integrations
# -----------------------------------------------------------------------------
# PostHog Analytics (optional)
# Note: POSTHOG_EVENTS_API_KEY/POSTHOG_HOST are used by Medusa Analytics Module.
# LOG_LEVEL for analytics-local must be set as a system env (not in .env).
POSTHOG_EVENTS_API_KEY=your_posthog_events_api_key
POSTHOG_HOST=https://app.posthog.com

# Stripe Payments (required for checkout)
STRIPE_API_KEY=your_stripe_secret_key

# Resend Email Service (required for transactional emails)
RESEND_API_KEY=your_resend_api_key

# -----------------------------------------------------------------------------
# Google OAuth (optional - for social login)
# -----------------------------------------------------------------------------
# Get these from Google Cloud Console: https://console.cloud.google.com/apis/credentials
# Callback URL should point to your storefront callback route
# Development: http://localhost:5173/account/auth/google/callback
# Production: https://gracestowel.com/account/auth/google/callback
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:5173/account/auth/google/callback

# -----------------------------------------------------------------------------
# Railway-Specific (auto-populated by Railway)
# -----------------------------------------------------------------------------
# These are set automatically when deploying to Railway:
# - DATABASE_URL (from PostgreSQL service)
# - REDIS_URL (from Redis service)
# - PORT (default: 9000)

PAYMENT_CAPTURE_DELAY_MS=10000

{
  "$schema": "https://kiro.dev/schemas/hook.json",
  "name": "Adversarial Code Review",
  "description": "Perform a thorough senior developer code review that finds 3-10 specific problems. Challenges code quality, test coverage, architecture compliance, security, and performance.",
  "trigger": {
    "type": "manual",
    "label": "üîç Code Review"
  },
  "action": {
    "type": "agent",
    "prompt": "Perform an ADVERSARIAL code review on the currently open file or the files I specify. Use the #code-review steering guide.\n\nReview requirements:\n1. Find 3-10 specific problems (NEVER say 'looks good')\n2. Check against ARCHITECTURE.md and AGENTS.md patterns\n3. Categorize issues as Critical/Major/Minor\n4. Offer to auto-fix issues with my approval\n\nFocus areas:\n- Architecture compliance (Medusa v2 patterns)\n- Type safety (no `any` types)\n- Error handling (no swallowed errors)\n- Security (input validation, no SQL injection)\n- Performance (N+1 queries, caching)\n- Test coverage\n\nOutput format:\n## Code Review: [filename]\n### Critical Issues (Must Fix)\n### Major Issues (Should Fix)\n### Minor Issues (Nice to Have)\n### Summary with verdict: APPROVED / NEEDS CHANGES / BLOCKED"
  }
}

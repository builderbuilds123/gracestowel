{
  "info": {
    "name": "Store API",
    "description": "Medusa Store API endpoints for storefront operations including products, carts, checkout, regions, and collections. These are public-facing endpoints used by the Grace Stowel storefront.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Products",
      "description": "Product catalog endpoints for browsing and searching products",
      "item": [
        {
          "name": "List Products",
          "description": "Retrieves a paginated list of products available in the store. Supports filtering by category, collection, and other attributes.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// JSON Schema for Product List Response - Contract Test",
                  "// Validates: Requirements 4.1, 4.2, 4.3, 4.4",
                  "const productListSchema = {",
                  "    type: 'object',",
                  "    required: ['products', 'count', 'offset', 'limit'],",
                  "    properties: {",
                  "        products: {",
                  "            type: 'array',",
                  "            items: {",
                  "                type: 'object',",
                  "                required: ['id', 'title', 'handle'],",
                  "                properties: {",
                  "                    id: { type: 'string' },",
                  "                    title: { type: 'string' },",
                  "                    handle: { type: 'string' },",
                  "                    description: { type: ['string', 'null'] },",
                  "                    thumbnail: { type: ['string', 'null'] },",
                  "                    variants: {",
                  "                        type: 'array',",
                  "                        items: {",
                  "                            type: 'object',",
                  "                            required: ['id'],",
                  "                            properties: {",
                  "                                id: { type: 'string' },",
                  "                                title: { type: ['string', 'null'] },",
                  "                                prices: {",
                  "                                    type: 'array',",
                  "                                    items: {",
                  "                                        type: 'object',",
                  "                                        properties: {",
                  "                                            amount: { type: 'number' },",
                  "                                            currency_code: { type: 'string' }",
                  "                                        }",
                  "                                    }",
                  "                                }",
                  "                            }",
                  "                        }",
                  "                    }",
                  "                }",
                  "            }",
                  "        },",
                  "        count: { type: 'number' },",
                  "        offset: { type: 'number' },",
                  "        limit: { type: 'number' }",
                  "    }",
                  "};",
                  "",
                  "pm.test('Response status is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Contract Test: Product list response matches schema', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(tv4.validate(response, productListSchema)).to.be.true;",
                  "    if (!tv4.validate(response, productListSchema)) {",
                  "        console.log('Schema validation error:', tv4.error);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Contract Test: Products array contains valid items', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.products).to.be.an('array');",
                  "    if (response.products.length > 0) {",
                  "        const product = response.products[0];",
                  "        pm.expect(product).to.have.property('id');",
                  "        pm.expect(product).to.have.property('title');",
                  "        pm.expect(product).to.have.property('handle');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Contract Test: Pagination fields are present and valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.count).to.be.a('number');",
                  "    pm.expect(response.offset).to.be.a('number');",
                  "    pm.expect(response.limit).to.be.a('number');",
                  "    pm.expect(response.count).to.be.at.least(0);",
                  "    pm.expect(response.offset).to.be.at.least(0);",
                  "    pm.expect(response.limit).to.be.at.least(1);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/store/products",
              "host": ["{{base_url}}"],
              "path": ["store", "products"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/store/products",
                  "host": ["{{base_url}}"],
                  "path": ["store", "products"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"products\": [\n    {\n      \"id\": \"prod_01EXAMPLE\",\n      \"title\": \"Grace Stowel Premium Towel\",\n      \"handle\": \"grace-stowel-premium-towel\",\n      \"description\": \"A luxurious premium towel\",\n      \"thumbnail\": \"https://example.com/thumbnail.jpg\",\n      \"variants\": [\n        {\n          \"id\": \"variant_01EXAMPLE\",\n          \"title\": \"White / Large\",\n          \"prices\": [\n            {\n              \"amount\": 2999,\n              \"currency_code\": \"usd\"\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  \"count\": 1,\n  \"offset\": 0,\n  \"limit\": 20\n}"
            }
          ]
        },
        {
          "name": "Get Product by Handle",
          "description": "Retrieves a single product by its URL handle. Used for product detail pages.",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/store/products?handle={{product_handle}}",
              "host": ["{{base_url}}"],
              "path": ["store", "products"],
              "query": [
                {
                  "key": "handle",
                  "value": "{{product_handle}}",
                  "description": "The URL-friendly handle of the product"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/store/products?handle=grace-stowel-premium-towel",
                  "host": ["{{base_url}}"],
                  "path": ["store", "products"],
                  "query": [
                    {
                      "key": "handle",
                      "value": "grace-stowel-premium-towel"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"products\": [\n    {\n      \"id\": \"prod_01EXAMPLE\",\n      \"title\": \"Grace Stowel Premium Towel\",\n      \"handle\": \"grace-stowel-premium-towel\",\n      \"description\": \"A luxurious premium towel with superior absorbency\",\n      \"thumbnail\": \"https://example.com/thumbnail.jpg\",\n      \"images\": [\n        {\n          \"id\": \"img_01EXAMPLE\",\n          \"url\": \"https://example.com/image1.jpg\"\n        }\n      ],\n      \"variants\": [\n        {\n          \"id\": \"variant_01EXAMPLE\",\n          \"title\": \"White / Large\",\n          \"sku\": \"TOWEL-WHT-LG\",\n          \"prices\": [\n            {\n              \"amount\": 2999,\n              \"currency_code\": \"usd\"\n            }\n          ],\n          \"inventory_quantity\": 100\n        }\n      ],\n      \"options\": [\n        {\n          \"id\": \"opt_01EXAMPLE\",\n          \"title\": \"Color\",\n          \"values\": [\"White\", \"Gray\", \"Navy\"]\n        },\n        {\n          \"id\": \"opt_02EXAMPLE\",\n          \"title\": \"Size\",\n          \"values\": [\"Small\", \"Medium\", \"Large\"]\n        }\n      ]\n    }\n  ],\n  \"count\": 1,\n  \"offset\": 0,\n  \"limit\": 1\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Carts",
      "description": "Shopping cart management endpoints for creating carts, adding items, and managing cart state",
      "item": [
        {
          "name": "Create Cart",
          "description": "Creates a new shopping cart. The cart ID is automatically stored in collection variables for subsequent requests.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Cart created successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Store cart_id in collection variables', function () {",
                  "    const response = pm.response.json();",
                  "    if (response.cart && response.cart.id) {",
                  "        pm.collectionVariables.set('cart_id', response.cart.id);",
                  "        console.log('Cart ID stored:', response.cart.id);",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"region_id\": \"{{region_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/store/carts",
              "host": ["{{base_url}}"],
              "path": ["store", "carts"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"region_id\": \"reg_01EXAMPLE\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/store/carts",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"cart\": {\n    \"id\": \"cart_01EXAMPLE\",\n    \"region_id\": \"reg_01EXAMPLE\",\n    \"items\": [],\n    \"subtotal\": 0,\n    \"tax_total\": 0,\n    \"total\": 0,\n    \"created_at\": \"2024-01-01T00:00:00.000Z\",\n    \"updated_at\": \"2024-01-01T00:00:00.000Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Cart",
          "description": "Retrieves the current cart by ID. Uses the cart_id stored in collection variables.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// JSON Schema for Cart Response - Contract Test",
                  "// Validates: Requirements 4.1, 4.2, 4.3, 4.4",
                  "const cartSchema = {",
                  "    type: 'object',",
                  "    required: ['cart'],",
                  "    properties: {",
                  "        cart: {",
                  "            type: 'object',",
                  "            required: ['id'],",
                  "            properties: {",
                  "                id: { type: 'string' },",
                  "                region_id: { type: ['string', 'null'] },",
                  "                items: {",
                  "                    type: 'array',",
                  "                    items: {",
                  "                        type: 'object',",
                  "                        required: ['id', 'quantity'],",
                  "                        properties: {",
                  "                            id: { type: 'string' },",
                  "                            cart_id: { type: 'string' },",
                  "                            variant_id: { type: ['string', 'null'] },",
                  "                            quantity: { type: 'number' },",
                  "                            unit_price: { type: 'number' },",
                  "                            subtotal: { type: 'number' }",
                  "                        }",
                  "                    }",
                  "                },",
                  "                subtotal: { type: 'number' },",
                  "                tax_total: { type: ['number', 'null'] },",
                  "                shipping_total: { type: ['number', 'null'] },",
                  "                total: { type: 'number' },",
                  "                shipping_address: {",
                  "                    type: ['object', 'null'],",
                  "                    properties: {",
                  "                        first_name: { type: 'string' },",
                  "                        last_name: { type: 'string' },",
                  "                        address_1: { type: 'string' },",
                  "                        city: { type: 'string' },",
                  "                        province: { type: ['string', 'null'] },",
                  "                        postal_code: { type: 'string' },",
                  "                        country_code: { type: 'string' }",
                  "                    }",
                  "                },",
                  "                billing_address: { type: ['object', 'null'] }",
                  "            }",
                  "        }",
                  "    }",
                  "};",
                  "",
                  "pm.test('Response status is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Contract Test: Cart response matches schema', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(tv4.validate(response, cartSchema)).to.be.true;",
                  "    if (!tv4.validate(response, cartSchema)) {",
                  "        console.log('Schema validation error:', tv4.error);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Contract Test: Cart has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.cart).to.have.property('id');",
                  "    pm.expect(response.cart).to.have.property('items');",
                  "    pm.expect(response.cart.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Contract Test: Cart totals are valid numbers', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.cart.subtotal).to.be.a('number');",
                  "    pm.expect(response.cart.total).to.be.a('number');",
                  "    pm.expect(response.cart.subtotal).to.be.at.least(0);",
                  "    pm.expect(response.cart.total).to.be.at.least(0);",
                  "});",
                  "",
                  "pm.test('Contract Test: Cart items have valid structure', function () {",
                  "    const response = pm.response.json();",
                  "    if (response.cart.items.length > 0) {",
                  "        const item = response.cart.items[0];",
                  "        pm.expect(item).to.have.property('id');",
                  "        pm.expect(item).to.have.property('quantity');",
                  "        pm.expect(item.quantity).to.be.a('number');",
                  "        pm.expect(item.quantity).to.be.at.least(1);",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/store/carts/{{cart_id}}",
              "host": ["{{base_url}}"],
              "path": ["store", "carts", "{{cart_id}}"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/store/carts/cart_01EXAMPLE",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "cart_01EXAMPLE"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"cart\": {\n    \"id\": \"cart_01EXAMPLE\",\n    \"region_id\": \"reg_01EXAMPLE\",\n    \"items\": [\n      {\n        \"id\": \"item_01EXAMPLE\",\n        \"cart_id\": \"cart_01EXAMPLE\",\n        \"variant_id\": \"variant_01EXAMPLE\",\n        \"quantity\": 2,\n        \"unit_price\": 2999,\n        \"subtotal\": 5998\n      }\n    ],\n    \"subtotal\": 5998,\n    \"tax_total\": 540,\n    \"shipping_total\": 500,\n    \"total\": 7038,\n    \"shipping_address\": null,\n    \"billing_address\": null\n  }\n}"
            }
          ]
        },
        {
          "name": "Add Line Item",
          "description": "Adds a product variant to the cart. Requires variant_id and quantity in the request body.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Line item added successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Cart contains the added item', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.cart.items.length).to.be.greaterThan(0);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"variant_id\": \"{{variant_id}}\",\n  \"quantity\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/store/carts/{{cart_id}}/line-items",
              "host": ["{{base_url}}"],
              "path": ["store", "carts", "{{cart_id}}", "line-items"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"variant_id\": \"variant_01EXAMPLE\",\n  \"quantity\": 1\n}"
                },
                "url": {
                  "raw": "{{base_url}}/store/carts/cart_01EXAMPLE/line-items",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "cart_01EXAMPLE", "line-items"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"cart\": {\n    \"id\": \"cart_01EXAMPLE\",\n    \"region_id\": \"reg_01EXAMPLE\",\n    \"items\": [\n      {\n        \"id\": \"item_01EXAMPLE\",\n        \"cart_id\": \"cart_01EXAMPLE\",\n        \"variant_id\": \"variant_01EXAMPLE\",\n        \"title\": \"Grace Stowel Premium Towel\",\n        \"quantity\": 1,\n        \"unit_price\": 2999,\n        \"subtotal\": 2999\n      }\n    ],\n    \"subtotal\": 2999,\n    \"tax_total\": 270,\n    \"total\": 3269\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Checkout",
      "description": "Checkout flow endpoints for completing purchases",
      "item": [
        {
          "name": "Complete Checkout Flow",
          "description": "Sequential requests to complete a full checkout: create cart → add line item → set shipping → create payment intent → complete checkout. Run this folder to execute the entire flow.",
          "item": [
            {
              "name": "1. Create Cart",
              "description": "Step 1: Creates a new shopping cart for the checkout flow.",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Cart created successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Store cart_id for checkout flow', function () {",
                      "    const response = pm.response.json();",
                      "    if (response.cart && response.cart.id) {",
                      "        pm.collectionVariables.set('cart_id', response.cart.id);",
                      "        console.log('Checkout Flow - Cart ID stored:', response.cart.id);",
                      "    }",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"region_id\": \"{{region_id}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/store/carts",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts"]
                }
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "body": "{\n  \"cart\": {\n    \"id\": \"cart_01CHECKOUT\",\n    \"region_id\": \"reg_01EXAMPLE\",\n    \"items\": [],\n    \"subtotal\": 0,\n    \"total\": 0\n  }\n}"
                }
              ]
            },
            {
              "name": "2. Add Line Item",
              "description": "Step 2: Adds a product to the cart.",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Line item added successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Cart has items', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.cart.items.length).to.be.greaterThan(0);",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"variant_id\": \"{{variant_id}}\",\n  \"quantity\": 1\n}"
                },
                "url": {
                  "raw": "{{base_url}}/store/carts/{{cart_id}}/line-items",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "{{cart_id}}", "line-items"]
                }
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "body": "{\n  \"cart\": {\n    \"id\": \"cart_01CHECKOUT\",\n    \"items\": [\n      {\n        \"id\": \"item_01EXAMPLE\",\n        \"variant_id\": \"variant_01EXAMPLE\",\n        \"quantity\": 1,\n        \"unit_price\": 2999\n      }\n    ],\n    \"subtotal\": 2999,\n    \"total\": 3269\n  }\n}"
                }
              ]
            },
            {
              "name": "3. Set Shipping Address",
              "description": "Step 3: Sets the shipping address for the cart.",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Shipping address set successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Cart has shipping address', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.cart.shipping_address).to.not.be.null;",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"shipping_address\": {\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"address_1\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"province\": \"NY\",\n    \"postal_code\": \"10001\",\n    \"country_code\": \"us\",\n    \"phone\": \"555-1234\"\n  },\n  \"email\": \"john.doe@example.com\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/store/carts/{{cart_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "{{cart_id}}"]
                }
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "body": "{\n  \"cart\": {\n    \"id\": \"cart_01CHECKOUT\",\n    \"email\": \"john.doe@example.com\",\n    \"shipping_address\": {\n      \"first_name\": \"John\",\n      \"last_name\": \"Doe\",\n      \"address_1\": \"123 Main St\",\n      \"city\": \"New York\",\n      \"province\": \"NY\",\n      \"postal_code\": \"10001\",\n      \"country_code\": \"us\"\n    },\n    \"subtotal\": 2999,\n    \"shipping_total\": 500,\n    \"total\": 3769\n  }\n}"
                }
              ]
            },
            {
              "name": "4. Create Payment Sessions",
              "description": "Step 4: Initializes payment sessions for the cart. Stores the client_secret for Stripe payment.",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Payment sessions created successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Store client_secret for payment', function () {",
                      "    const response = pm.response.json();",
                      "    if (response.cart && response.cart.payment_session) {",
                      "        const data = response.cart.payment_session.data;",
                      "        if (data && data.client_secret) {",
                      "            pm.collectionVariables.set('client_secret', data.client_secret);",
                      "            console.log('Checkout Flow - Client secret stored');",
                      "        }",
                      "    }",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/store/carts/{{cart_id}}/payment-sessions",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "{{cart_id}}", "payment-sessions"]
                }
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "body": "{\n  \"cart\": {\n    \"id\": \"cart_01CHECKOUT\",\n    \"payment_sessions\": [\n      {\n        \"id\": \"ps_01EXAMPLE\",\n        \"provider_id\": \"stripe\",\n        \"data\": {\n          \"client_secret\": \"pi_xxx_secret_xxx\"\n        }\n      }\n    ],\n    \"payment_session\": {\n      \"id\": \"ps_01EXAMPLE\",\n      \"provider_id\": \"stripe\",\n      \"data\": {\n        \"client_secret\": \"pi_xxx_secret_xxx\"\n      }\n    }\n  }\n}"
                }
              ]
            },
            {
              "name": "5. Complete Cart",
              "description": "Step 5: Completes the checkout and creates an order. This is the final step in the checkout flow.",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Checkout completed successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Order was created', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.type).to.equal('order');",
                      "    if (response.order && response.order.id) {",
                      "        console.log('Checkout Flow Complete - Order ID:', response.order.id);",
                      "    }",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/store/carts/{{cart_id}}/complete",
                  "host": ["{{base_url}}"],
                  "path": ["store", "carts", "{{cart_id}}", "complete"]
                }
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "body": "{\n  \"type\": \"order\",\n  \"order\": {\n    \"id\": \"order_01EXAMPLE\",\n    \"status\": \"pending\",\n    \"fulfillment_status\": \"not_fulfilled\",\n    \"payment_status\": \"awaiting\",\n    \"display_id\": 1001,\n    \"email\": \"john.doe@example.com\",\n    \"items\": [\n      {\n        \"id\": \"item_01EXAMPLE\",\n        \"title\": \"Grace Stowel Premium Towel\",\n        \"quantity\": 1,\n        \"unit_price\": 2999\n      }\n    ],\n    \"subtotal\": 2999,\n    \"shipping_total\": 500,\n    \"tax_total\": 270,\n    \"total\": 3769,\n    \"created_at\": \"2024-01-01T00:00:00.000Z\"\n  }\n}"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Regions",
      "description": "Region endpoints for retrieving available shipping regions and their configurations",
      "item": [
        {
          "name": "List Regions",
          "description": "Retrieves all available regions. Regions define shipping zones, currencies, and tax settings. Use the region_id when creating carts.",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/store/regions",
              "host": ["{{base_url}}"],
              "path": ["store", "regions"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/store/regions",
                  "host": ["{{base_url}}"],
                  "path": ["store", "regions"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"regions\": [\n    {\n      \"id\": \"reg_01EXAMPLE\",\n      \"name\": \"United States\",\n      \"currency_code\": \"usd\",\n      \"tax_rate\": 0,\n      \"tax_code\": null,\n      \"countries\": [\n        {\n          \"id\": 840,\n          \"iso_2\": \"us\",\n          \"iso_3\": \"usa\",\n          \"name\": \"UNITED STATES\",\n          \"display_name\": \"United States\"\n        }\n      ],\n      \"payment_providers\": [\n        {\n          \"id\": \"stripe\",\n          \"is_installed\": true\n        }\n      ],\n      \"fulfillment_providers\": [\n        {\n          \"id\": \"manual\",\n          \"is_installed\": true\n        }\n      ]\n    },\n    {\n      \"id\": \"reg_02EXAMPLE\",\n      \"name\": \"Europe\",\n      \"currency_code\": \"eur\",\n      \"tax_rate\": 20,\n      \"countries\": [\n        {\n          \"id\": 276,\n          \"iso_2\": \"de\",\n          \"name\": \"GERMANY\",\n          \"display_name\": \"Germany\"\n        },\n        {\n          \"id\": 250,\n          \"iso_2\": \"fr\",\n          \"name\": \"FRANCE\",\n          \"display_name\": \"France\"\n        }\n      ]\n    }\n  ],\n  \"count\": 2,\n  \"offset\": 0,\n  \"limit\": 20\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Collections",
      "description": "Product collection endpoints for browsing curated product groups",
      "item": [
        {
          "name": "List Collections",
          "description": "Retrieves all product collections. Collections are curated groups of products used for merchandising and navigation.",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/store/collections",
              "host": ["{{base_url}}"],
              "path": ["store", "collections"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/store/collections",
                  "host": ["{{base_url}}"],
                  "path": ["store", "collections"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"collections\": [\n    {\n      \"id\": \"pcol_01EXAMPLE\",\n      \"title\": \"Premium Towels\",\n      \"handle\": \"premium-towels\",\n      \"created_at\": \"2024-01-01T00:00:00.000Z\",\n      \"updated_at\": \"2024-01-01T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"pcol_02EXAMPLE\",\n      \"title\": \"Bath Essentials\",\n      \"handle\": \"bath-essentials\",\n      \"created_at\": \"2024-01-01T00:00:00.000Z\",\n      \"updated_at\": \"2024-01-01T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"pcol_03EXAMPLE\",\n      \"title\": \"New Arrivals\",\n      \"handle\": \"new-arrivals\",\n      \"created_at\": \"2024-01-01T00:00:00.000Z\",\n      \"updated_at\": \"2024-01-01T00:00:00.000Z\"\n    }\n  ],\n  \"count\": 3,\n  \"offset\": 0,\n  \"limit\": 20\n}"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:9000",
      "type": "string"
    },
    {
      "key": "product_handle",
      "value": "",
      "type": "string"
    },
    {
      "key": "cart_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "client_secret",
      "value": "",
      "type": "string"
    },
    {
      "key": "region_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "variant_id",
      "value": "",
      "type": "string"
    }
  ]
}
